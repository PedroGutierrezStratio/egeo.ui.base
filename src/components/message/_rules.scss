$this: '#{$egeo-namespace}c-message';

@mixin egeo-c-message-modifier($name, $properties) {
    @if $name {
        &--#{$name} {
            @if $properties {
                @if length($properties) > 0 {
                    @each $name, $value in $properties {
                        #{$name}: $value;
                    }
                }               
            }
        }       
    } @else {
        @if function-exist(egeo-log) {
            @if egeo-log('@egeo-c-message-modifier::$name null is not allowed, the modifier will be not generated.', $log-warn) {}
        }
    }
}

%arrow {
    border-style: dashed dashed solid;
    @if $egeo-c-message--help__arrow---size { border-width: 0 $egeo-c-message--help__arrow---size $egeo-c-message--help__arrow---size; }
    color: transparent;
    content: '';
    @if $egeo-c-message--help__arrow---size { left: calc(50% - #{$egeo-c-message--help__arrow---size}); }
    position: absolute;
}

@mixin egeo-c-message {
	@include egeo-c-component;

    @if $egeo-c-message---padding { padding: $egeo-c-message---padding; }
    @if $egeo-c-message---font-size { font-size: $egeo-c-message---font-size; }

    @each $message, $properties in $egeo-c-messages {
        @include egeo-c-message-modifier($message, $properties);
    }

    &--invisible {
        visibility: hidden;
    }

    &--help {
        padding: $egeo-c-message--help__arrow---size 0 0;

        &:before {
            @extend %arrow;
            border-bottom-color: $egeo-c-message--help---background;
            top: 2px;
            z-index: egeo-get-layer(top-1);
        }

        &:after {
            @extend %arrow;
            border-bottom-color: $egeo-c-message--help---shadow-color;
            top: 1px;
            z-index: egeo-get-layer(sub-1);
        }

        > .egeo-c-message__text {
            border: 1px solid $egeo-c-message--help---shadow-color;
            padding: .5rem;
        }

        .egeo-c-message {
            margin-bottom: .5rem;
            padding-bottom: .5rem;
        }
    }
}

@if variable-exists(egeo-c-message) {
    @if $egeo-c-message {
        .#{$this} {
            @include egeo-c-message;
        }
    }
}
