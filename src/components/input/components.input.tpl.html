<div ng-form name="{{id}}" class="egeo-c-formgroup">
    <label class="egeo-c-label" for="{{id}}" ng-show="{{(label != null)}}">
        {{label}}

        <span class="egeo-c-label__optional-mark" data-ng-if="!required"></span>

        <i class="egeo-c-icon icon-help2" data-ng-if="vm.hasHelp">
            <div class="egeo-c-popover__arrow egeo-c-popover__arrow--top" data-ng-if="vm.hasHelp" data-ng-class="{'egeo-c-popover--open': vm.isFocused}"></div>
            <div class="egeo-c-popover__arrow-shadow egeo-c-popover__arrow-shadow--top" data-ng-if="vm.hasHelp" data-ng-class="{'egeo-c-popover--open': vm.isFocused}"></div>
        </i>

        <div class="egeo-c-popover" data-id="popover-{{vm.id}}">
            <div class="egeo-c-popover__text">
                {{helpText}}
            </div>
        </div>
    </label>

    <input type="{{type}}" class="egeo-c-input" id="{{id}}" name="{{id}}" placeholder="{{placeholder}}" data-ng-model="model" data-ng-pattern="pattern" data-ng-required="{{required}}" data-ng-disabled="{{disabled}}" data-qa="{{qa}}" data-ng-trim="false" data-ng-focus="vm.isFocused = true" data-ng-blur="vm.isFocused = false">

    <div class="egeo-c-popover" data-id="popover-{{vm.id}}" data-ng-class="{'egeo-c-popover--open': (vm.isFocused && vm.hasHelp)}">
        <div class="egeo-c-popover__text">{{helpText}}</div>
    </div>

    <div class="egeo-c-message" data-ng-if="!this[id].$valid && this[id][id].$touched" data-ng-class="{'egeo-c-message--error': required, 'egeo-c-message--warn': !required}">
        <i class="egeo-c-icon icon-alert" data-ng-if="!required && this[id][id].$error.pattern"></i>
        <i class="egeo-c-icon icon-circle-cross" data-ng-if="this[id][id].$error.required || (this[id][id].$error.pattern && required)"></i>
        <span class="egeo-c-message__text" data-ng-if="this[id][id].$error.required">This field is required.</span>
        <span class="egeo-c-message__text" data-ng-if="this[id][id].$error.pattern">This field has wrong format.</span>
    </div>

    <div class="egeo-c-message egeo-c-message--restriction" data-ng-class="{'egeo-c-message--invisible': !(restriction && (this[id].$valid || !this[id][id].$touched) && vm.isFocused)}">
        <span class="egeo-c-message__text">{{restriction}}</span>
    </div>
</div>
